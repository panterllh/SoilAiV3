<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SoilAI Pro ‚Äî ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡∏¥‡∏ô (Refactor)</title>
  <meta name="description" content="‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡∏¥‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ‚Äî ‡πÅ‡∏¢‡∏Å‡πÑ‡∏ü‡∏•‡πå CSS/JS, ‡πÇ‡∏´‡∏•‡∏î TensorFlow ‡πÅ‡∏ö‡∏ö dynamic, export PDF, local history">

  <!-- Fonts & icons (preconnect for performance) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>

  <!-- jsPDF (kept for PDF export) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="style.css">

  <!-- Accessibility hint -->
  <meta name="color-scheme" content="light dark">
</head>
<body>
  <!-- Header -->
  <header role="banner">
    <nav class="nav" aria-label="‡∏´‡∏•‡∏±‡∏Å">
      <a class="logo" href="#home"><i class="fas fa-seedling" aria-hidden="true"></i> SoilAI Pro</a>
      <div class="nav-actions">
        <a href="#analyze" class="nav-link">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</a>
        <button id="themeToggle" class="theme-toggle" aria-pressed="false" aria-label="‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô-‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô">üåì</button>
      </div>
    </nav>
  </header>

  <!-- Main -->
  <main class="container">
    <section id="home" class="hero" aria-labelledby="heroTitle">
      <h1 id="heroTitle">üå± ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡∏¥‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h1>
      <p>‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏î‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏î‡∏¥‡∏ô ‡∏Ñ‡πà‡∏≤ pH ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</p>
      <div class="hero-actions">
        <a href="#analyze" class="btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</a>
      </div>
    </section>

    <section id="analyze" class="card" aria-labelledby="analyzeTitle">
      <h2 id="analyzeTitle">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ/‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</h2>

      <div class="upload-area" id="uploadArea" tabindex="0" aria-label="‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û">
        <input id="imageInput" type="file" accept="image/*" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û" hidden>
        <p>‡∏•‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå<br><small>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö JPG/PNG ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 10MB</small></p>
      </div>

      <div class="upload-controls">
        <button id="openFileBtn" class="btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå</button>
        <button id="openCameraBtn" class="btn">‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        <button id="analyzeBtn" class="btn primary" disabled>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
        <button id="resetBtn" class="btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
        <button id="exportPdfBtn" class="btn">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (PDF)</button>
      </div>

      <div id="previewContainer" class="preview" aria-live="polite"></div>

      <div id="loading" class="loading" role="status" aria-hidden="true">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‚Ä¶</div>

      <div id="resultDisplay" class="result" aria-live="polite">
        <div class="soil-result">
          <div class="soil-name" id="soilName">-</div>
          <div class="confidence">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à: <span id="confidenceText">-</span></div>
          <div class="properties">
            <div>pH: <strong id="phValue">-</strong></div>
            <div>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô: <strong id="moistureValue">-</strong></div>
            <div>‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: <strong id="tempValue">-</strong></div>
          </div>
          <div class="recommendations" id="recommendations"></div>
        </div>
      </div>

      <h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h3>
      <div id="historyList" class="history" aria-live="polite"></div>
    </section>
  </main>

  <!-- Simple chatbot toggle (local canned responses) -->
  <button id="chatbotToggle" class="chatbot-button" aria-label="‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Å‡∏©‡∏ï‡∏£">üí¨</button>
  <div id="chatbotPanel" class="chatbot-panel" role="dialog" aria-hidden="true">
    <header class="chatbot-header">
      <h4>AI ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Å‡∏©‡∏ï‡∏£</h4>
      <button id="closeChatbot" aria-label="‡∏õ‡∏¥‡∏î‡πÅ‡∏ä‡∏ó">‚úñ</button>
    </header>
    <div class="chatbot-body" id="chatbotBody"></div>
    <div class="chatbot-input">
      <input id="chatInput" placeholder="‡∏ñ‡∏≤‡∏°‡∏â‡∏±‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä...">
      <button id="chatSend">‡∏™‡πà‡∏á</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="script.js" defer></script>
</body>
</html>
